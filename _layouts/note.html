---
layout: default
---
{%- comment -%}
Assign Date and Meal vars from the filename of this Note,
which happen to correspond/define the page.title and page.note vars
{%- endcomment -%}

{% assign key_date = page.date | date: "%Y-%m-%d" %}
{% assign key_meal = page.title %}

<!-- template: note.html -->
<div class="row" id="title">
	<div class="small-12 columns">

    <div class="page-header">
      <div class="sup-head"><a href="/notes/" title="Meal Notes">Meal Notes</a></div>
      <div class="title">{% if page.feature %}{{ page.feature }}{% else %}{{ page.title }}{% endif %}</div>
      <div class="sub-title">
        <span class="date">{% if page.feature %}{{ page.title }}, {% endif %}{{ page.date | date_to_string: "ordinal", "US" }}</span>
        {% if page.tags %}

          {% include object_tag_lists.html tags_array=page.tags tag_label=" &nbsp; / &nbsp; " %}
{% comment %}
          <span class="tags"> &nbsp; / &nbsp;
          {% for tag in page.tags %}
            {% if forloop.last %}
              {% assign comma = "" %}
            {% else %}
              {% assign comma = ", " %}
            {% endif %}
            <a href="/tag/{{ tag | slugify }}" title="Tagged as {{ tag | downcase }}">{{ tag | downcase }}</a>{{comma}}
          {% endfor %}
          </span>
{% endcomment %}
        {% endif %}
      </div>
    </div>

  </div>
</div>

<div class="row" id="">
	{%- comment -%}
	<div class="medium-2 columns" id="left-margin">
		&nbsp;
	</div>
	{%- endcomment -%}
	<div class="medium-9 columns" id="main">

		<div class="content">
      {%- include content.html -%}
    </div>

	</div>
	<div class="medium-3 columns" id="right-margin">

		{%- include backlinks.html -%}
    
    {% assign rbdm_dict = site.data.meals_indices.recipe_by_date_and_meal[key_date][key_meal] %}
    {% if rbdm_dict %}
      <h4 class="marker">Recipes prepared</h4>
      {% for recipe_id in rbdm_dict %}
        <!--{{ recipe_id }}-->
        {% assign result = site.recipes | where: "p_recipe_id", recipe_id %}
        {% if result[0] %}
          {% for recip in result %}
            <a class="recip-figure" href="{{recip.url}}">
              {% if recip.photo_thumb %}
              {% capture background %}no-repeat center url('/images/recipes/{{recip.photo_thumb}}'){% endcapture%}
              {% else %}
              {% assign background = "#f1f1f1" %}
              {% endif %}
              <div
                class="recip-thumb"
                style="background:{{ background }};"
                >&nbsp</div>
              <div class="recip-caption">{{recip.title}}</div>
            </a>
          {% endfor %}
        {% endif %}
      {% endfor %}
    {% endif %}

	</div>
</div>

{% if jekyll.environment == 'development' %}
<hr>
<div class="row dev-only" id="">
  <div class="medium-12 columns" id="stuff">

    <h3>Categories of Recipes in this Meal</h3>
    <p>From _data/categories</p>
    {% if rbdm_dict %}
      <h4>Recipes</h4>
      {% for recipe_id in rbdm_dict %}
        {% assign result = site.recipes | where: "p_recipe_id", recipe_id %}

        {% if result[0] %}
          {% for recip in result %}
              <pre>{{ recip.categories | jsonify }}</pre>
          {% endfor %}
        {% endif %}

      {% endfor %}
    {% endif %}


    <h3>Tags</h3>
    <p>From page's YAML front matter</p>
    <p>Page.tags: {{ page.tags }}</p>
    <ul>
    {% for tag in page.tags %}
      <li>{{ tag }}</li>
    {% endfor %}
    </ul>

<pre>
CTX: Meal
    - Recipe
      - Categories
    - Recipe
      - Categories
</pre>

  </div>
</div>
{% endif %}

<!-- /template: note.html -->